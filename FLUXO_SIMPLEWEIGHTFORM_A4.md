# 📊 FLUXO SIMPLEWEIGHTFORM - PESAGEM MANUAL
## Formato A4 - Diagrama Completo

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           SIMPLEWEIGHTFORM                                 │
│                        PESAGEM MANUAL - A4                                 │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  🎯 INÍCIO DO FLUXO                                                      │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                    FORMULÁRIO DE PESAGEM                           │   │
│  │                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  📏 ALTURA (cm)                                           │   │   │
│  │  │  ┌─────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ Input: [165.0] (padrão ou dados cadastrados)      │   │   │   │
│  │  │  └─────────────────────────────────────────────────────┘   │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  │                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  ⚖️ PESO (kg) * OBRIGATÓRIO                              │   │   │
│  │  │  ┌─────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ Input: [_____] (ex: 72.5)                         │   │   │   │
│  │  │  └─────────────────────────────────────────────────────┘   │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  │                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  📐 PERÍMETRO DA CINTURA (cm)                            │   │   │
│  │  │  ┌─────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ Input: [_____] (ex: 85.5) - OPCIONAL              │   │   │   │
│  │  │  └─────────────────────────────────────────────────────┘   │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  │                                                                     │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  💾 BOTÃO: "SALVAR PESAGEM"                              │   │   │
│  │  │  ┌─────────────────────────────────────────────────────┐   │   │   │
│  │  │  │ [SALVAR PESAGEM] (desabilitado se peso vazio)     │   │   │   │
│  │  │  └─────────────────────────────────────────────────────┘   │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  🔄 PROCESSAMENTO                                                         │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  VALIDAÇÃO DOS DADOS                                               │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  ✅ Peso > 0                                               │   │   │
│  │  │  ✅ Peso <= 300kg                                          │   │   │
│  │  │  ✅ Altura válida                                          │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  CÁLCULO DO IMC                                                  │   │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  Fórmula: peso / (altura/100)²                            │   │   │
│  │  │  Exemplo: 72.5 / (1.65)² = 26.6                          │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  CLASSIFICAÇÃO DO RISCO METABÓLICO                               │   │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  IMC < 18.5: baixo_peso                                   │   │   │
│  │  │  IMC 18.5-24.9: normal                                    │   │   │
│  │  │  IMC 25-29.9: sobrepeso                                   │   │   │
│  │  │  IMC 30-34.9: obesidade_grau1                             │   │   │
│  │  │  IMC 35-39.9: obesidade_grau2                             │   │   │
│  │  │  IMC >= 40: obesidade_grau3                               │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  💾 SALVAMENTO NO BANCO DE DADOS                                         │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  TABELA: weight_measurements                                        │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  user_id: UUID do usuário                                 │   │   │
│  │  │  peso_kg: 72.5                                            │   │   │
│  │  │  circunferencia_abdominal_cm: 85.5                        │   │   │
│  │  │  imc: 26.6                                                │   │   │
│  │  │  risco_metabolico: 'sobrepeso'                            │   │   │
│  │  │  device_type: 'manual'                                    │   │   │
│  │  │  notes: 'Entrada manual'                                  │   │   │
│  │  │  measurement_date: timestamp atual                        │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  ✅ RESULTADO E FEEDBACK                                                  │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  TOAST DE SUCESSO                                                 │   │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  "Pesagem salva! Peso: 72.5kg | IMC: 26.6"               │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  LIMPEZA DO FORMULÁRIO                                            │   │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  peso_kg: ""                                               │   │   │
│  │  │  circunferencia_abdominal_cm: ""                           │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  RECARREGAMENTO DA PÁGINA                                        │   │   │
│  │  ┌─────────────────────────────────────────────────────────────┐   │   │
│  │  │  setTimeout(() => window.location.reload(), 7000)         │   │   │
│  │  └─────────────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  🎯 CARACTERÍSTICAS PRINCIPAIS                                           │
│                                                                             │
│  ✅ ENTRADA MANUAL DE PESO                                                │
│  │  • Campo obrigatório com validação                                    │
│  │  • Aceita valores decimais (ex: 72.5)                                │
│  │  • Range: 30kg - 300kg                                                │
│  │                                                                         │
│  ✅ CÁLCULO DE IMC                                                        │
│  │  • Calculado automaticamente                                          │
│  │  • Usa altura cadastrada ou padrão (165cm)                           │
│  │  • Fórmula: peso / (altura/100)²                                     │
│  │                                                                         │
│  ✅ PERÍMETRO ABDOMINAL                                                   │
│  │  • Campo opcional                                                     │
│  │  • Aceita valores decimais                                            │
│  │  • Range: 50cm - 150cm                                                │
│  │                                                                         │
│  ✅ INTERFACE LIMPA                                                       │
│  │  • Design minimalista                                                 │
│  │  • Validação em tempo real                                            │
│  │  • Feedback visual claro                                              │
│  │  • Responsivo para mobile                                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  🔧 VALIDAÇÕES E TRATAMENTO DE ERROS                                     │
│                                                                             │
│  ❌ ERROS COMUNS                                                           │
│  │  • Peso vazio ou inválido                                             │
│  │  • Usuário não autenticado                                            │
│  │  • Dados físicos não cadastrados                                      │
│  │  • Erro de conexão com banco                                          │
│  │                                                                         │
│  ✅ TRATAMENTO                                                            │
│  │  • Toast de erro com mensagem clara                                   │
│  │  • Criação automática de dados físicos                                │
│  │  • Retry automático em falhas                                         │
│  │  • Log detalhado para debug                                           │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  📊 DADOS SALVOS NO SUPABASE                                             │
│                                                                             │
│  TABELA: weight_measurements                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  id: UUID (gerado automaticamente)                                │   │
│  │  user_id: UUID (usuário logado)                                    │   │
│  │  peso_kg: DECIMAL(5,2) (obrigatório)                              │   │
│  │  circunferencia_abdominal_cm: DECIMAL(5,2) (opcional)             │   │
│  │  imc: DECIMAL(4,2) (calculado)                                     │   │
│  │  risco_metabolico: VARCHAR(20) (calculado)                        │   │
│  │  device_type: VARCHAR(50) ('manual')                               │   │
│  │  notes: TEXT ('Entrada manual')                                     │   │
│  │  measurement_date: TIMESTAMP (automático)                          │   │
│  │  created_at: TIMESTAMP (automático)                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│  🎯 FLUXO COMPLETO EM RESUMO                                             │
│                                                                             │
│  1️⃣ USUÁRIO DIGITA PESO                                                  │
│  2️⃣ USUÁRIO DIGITA PERÍMETRO (OPCIONAL)                                 │
│  3️⃣ SISTEMA VALIDA DADOS                                                 │
│  4️⃣ SISTEMA CALCULA IMC                                                  │
│  5️⃣ SISTEMA CLASSIFICA RISCO                                             │
│  6️⃣ SISTEMA SALVA NO BANCO                                              │
│  7️⃣ SISTEMA MOSTRA TOAST DE SUCESSO                                     │
│  8️⃣ SISTEMA LIMPA FORMULÁRIO                                            │
│  9️⃣ SISTEMA RECARREGA PÁGINA                                            │
│  🔟 DASHBOARD ATUALIZADO COM NOVOS DADOS                                │
└─────────────────────────────────────────────────────────────────────────────┘ 